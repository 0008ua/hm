(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{Gdn9:function(t,e,n){"use strict";var r=n("IheW"),o=n("cp0P"),c=n("lJxs"),i=n("8Y7J");let p=(()=>{class t{constructor(t){this.http=t}getPrefix(t){const e={headers:new r.g({"Content-Type":"application/json"})};return this.http.get("api/catalog/get-prefix/"+t,e)}}return t.ngInjectableDef=i.Rb({factory:function(){return new t(i.Sb(r.c))},token:t,providedIn:"root"}),t})();n.d(e,"a",(function(){return s}));let s=(()=>{class t{constructor(t,e){this.http=t,this.catalogService=e}loadProduct(t){const e={headers:new r.g({"Content-Type":"application/json"})};return this.http.get("api/product/load-product/"+t,e)}upsertProduct(t){const e={headers:new r.g({"Content-Type":"application/json"})};return this.http.post("api/product/upsert-product",t,e)}getSkuList(t){const e={headers:new r.g({"Content-Type":"application/json"})};return this.http.get("api/product/get-sku-list/"+t,e)}generateSku(t){const e=this.catalogService.getPrefix(t),n=this.getSkuList(t);return Object(o.a)(e,n).pipe(Object(c.a)(t=>{const{prefix:e}=t[0],n=t[1].map(t=>t._id).filter(t=>t.slice(0,3)===e).map(t=>+t.slice(3));let r=1;for(let c=0;c<n.length;c++){if(n[c]-(c+1)>=1){r=c+1;break}c===n.length-1&&(r=n.length+1)}let o=r.toString();for(;o.length<4;)o="0"+o;return e+o},t=>t))}}return t.ngInjectableDef=i.Rb({factory:function(){return new t(i.Sb(r.c),i.Sb(p))},token:t,providedIn:"root"}),t})()}}]);